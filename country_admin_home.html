
<div class="page-wrapper">
    <!-- ============================================================== -->
    <!-- Bread crumb and right sidebar toggle -->
    <!-- ============================================================== -->
    <div class="page-breadcrumb bg-white">
        <div class="row align-items-center">
            <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
                <h4 style="color: #405a67;text-align: center;font-weight: 800;">Country Admin Dashboard</h4>
            </div>
            <div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
                <!-- <div class="d-md-flex">
                    <ol class="breadcrumb ms-auto">
                        <li><a href="#" class="fw-normal">Dashboard</a></li>
                    </ol>
                    <a href="#" target="_blank" class="btn btn-danger  d-none d-md-block pull-right ms-3 hidden-xs hidden-sm waves-effect waves-light text-white">Add new template</a>
                </div> -->
            </div>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- ============================================================== -->
    <!-- End Bread crumb and right sidebar toggle -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- Container fluid  -->
    <!-- ============================================================== -->
    <div class="container-fluid">
        <!-- ============================================================== -->
        <!-- Three charts -->
        <!-- ============================================================== -->
        <div class="row justify-content-center">
            <!-- north region start -->
            <div class="col-lg-6 col-md-12">
                <div class="white-box analytics-info shadow country-admin-home-box">
                    <h4 class="text-center" style="color: #405a67; font-weight: 700;">North Region</h4>
                    <hr>
                    <div class="total-cnt-count">
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 style="color: #00356b">Total Cluster</h4>
                            <h6 id="north-total-cluster"></h6>
                        </div>
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 style="color: #1e75cc">Total Nurseries</h4>
                            <h6 id="north-total-nurseries"></h6>
                        </div>
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 class="text-info">Total Teachers</h4>
                            <h6 id="north-total-teachers"></h6>
                        </div>
                    </div>
                    <div class="show-more-btn mt-3 text-center">
                        <button class="btn btn-sm btn-outline-info region-btn" region="North"  type="button" data-toggle="modal" data-target="#north-region">View Details</button>
                    </div>

                        <!-- Modal -->
                        <div class="modal fade" id="north-region" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h4 class="modal-title" id="exampleModalLabel">North Region</h4>
                                <a type="button" class="close close-model-btn" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </a>
                                </div>
                                <div class="modal-body North">
                                 
                                </div>
                            </div>
                            </div>
                        </div>
                    <!-- Modal ends -->
                </div>
            </div>
            <!-- north region end -->

            <!-- East region start -->
            <div class="col-lg-6 col-md-12">
                <div class="white-box analytics-info shadow country-admin-home-box">
                    <h4 class="text-center" style="color: #405a67; font-weight: 700;">East Region</h4>
                    <hr>
                    <div class="total-cnt-count">
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 style="color: #00356b">Total Cluster</h4>
                            <h6 id="east-total-cluster"></h6>
                        </div>
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 style="color: #1e75cc">Total Nurseries</h4>
                            <h6 id="east-total-nurseries"></h6>
                        </div>
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 class="text-info">Total Teachers</h4>
                            <h6 id="east-total-teachers"></h6>
                        </div>
                    </div>
                    <div class="show-more-btn mt-3 text-center">
                        <button class="btn btn-sm btn-outline-info region-btn" region="East" type="button" data-toggle="modal" data-target="#east-region">View Details</button>
                    </div>
                         <!-- Modal -->
                         <div class="modal fade" id="east-region" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h4 class="modal-title" id="exampleModalLabel">East Region</h4>
                                <a type="button" class="close close-model-btn" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </a>
                                </div>
                                <div class="modal-body East">
                                
                                </div>
                            </div>
                            </div>
                        </div>
                    <!-- Modal ends -->
                </div>
            </div>
            <!-- east region end -->
        </div>

        <div class="row justify-content-center">
            <!-- west region start -->
            <div class="col-lg-6 col-md-12">
                <div class="white-box analytics-info shadow country-admin-home-box">
                    <h4 class="text-center" style="color: #405a67; font-weight: 700;">West Region</h4>
                    <hr>
                    <div class="total-cnt-count">
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 style="color: #00356b">Total Cluster</h4>
                            <h6 id="west-total-cluster"></h6>
                        </div>
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 style="color: #1e75cc">Total Nurseries</h4>
                            <h6 id="west-total-nurseries"></h6>
                        </div>
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 class="text-info">Total Teachers</h4>
                            <h6 id="west-total-teachers"></h6>
                        </div>
                    </div>
                    <div class="show-more-btn mt-3 text-center">
                        <button class="btn btn-sm btn-outline-info region-btn" region="West" type="button" data-toggle="modal" data-target="#westregion">View Details</button>
                    </div>
                         <!-- Modal -->
                         <div class="modal fade" id="westregion" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h4 class="modal-title" id="exampleModalLabel">West Region</h4>
                                <a type="button" class="close close-model-btn" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </a>
                                </div>
                                <div class="modal-body West">
                                
                                </div>
                            </div>
                            </div>
                        </div>
                    <!-- Modal ends -->
                </div>
            </div>
            <!-- west region end -->

            <!-- south region start -->
            <div class="col-lg-6 col-md-12">
                <div class="white-box analytics-info shadow country-admin-home-box">
                    <h4 class="text-center" style="color: #405a67; font-weight: 700;">South Region</h4>
                    <hr>
                    <div class="total-cnt-count">
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 style="color: #00356b">Total Cluster</h4>
                            <h6 id="south-total-cluster"></h6>
                        </div>
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 style="color: #1e75cc">Total Nurseries</h4>
                            <h6 id="south-total-nurseries"></h6>
                        </div>
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 class="text-info">Total Teachers</h4>
                            <h6 id="south-total-teachers"></h6>
                        </div>
                    </div>
                    <div class="show-more-btn mt-3 text-center">
                        <button class="btn btn-sm btn-outline-info region-btn" region="South" type="button" data-toggle="modal" data-target="#south-region">View Details</button>
                    </div>
                         <!-- Modal -->
                         <div class="modal fade" id="south-region" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h4 class="modal-title" id="exampleModalLabel">South Region</h4>
                                <a type="button" class="close close-model-btn" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </a>
                                </div>
                                <div class="modal-body South">
                                    
                                </div>
                            </div>
                            </div>
                        </div>
                    <!-- Modal ends -->
                </div>
            </div>
            <!-- south region end -->
        </div>
        <div class="row">
            <!-- Central region start -->
            <div class="col-lg-6 col-md-12">
                <div class="white-box analytics-info shadow country-admin-home-box">
                    <h4 class="text-center" style="color: #405a67; font-weight: 700;">Central Region</h4>
                    <hr>
                    <div class="total-cnt-count">
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 style="color: #00356b">Total Cluster</h4>
                            <h6 id="central-total-cluster"></h6>
                        </div>
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 style="color: #1e75cc">Total Nurseries</h4>
                            <h6 id="central-total-nurseries"></h6>
                        </div>
                        <div class="total-clus-count d-flex justify-content-between mb-2">
                            <h4 class="text-info">Total Teachers</h4>
                            <h6 id="central-total-teachers"></h6>
                        </div>
                    </div>
                    <div class="show-more-btn mt-3 text-center">
                        <button class="btn btn-sm btn-outline-info region-btn" region="Central" type="button" data-toggle="modal" data-target="#central-region">View Details</button>
                    </div>
                         <!-- Modal -->
                         <div class="modal fade" id="central-region" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h4 class="modal-title" id="exampleModalLabel">Central Region</h4>
                                <a type="button" class="close close-model-btn" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </a>
                                </div>
                                <div class="modal-body Central">
                                    
                                </div>
                            </div>
                            </div>
                        </div>
                    <!-- Modal ends -->
                </div>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- RECENT SALES -->
        <!-- ============================================================== -->
        <div class="row">
            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                <div class="white-box shadow">
                    <div class="d-flex justify-content-between">
                        <h3 class="box-title">Inspections Status</h3>
                        <a onclick="openNav()" class="btn btn-sm btn-outline-info btn-common">Apply Filter on Inspection</a>
                    </div>
                    <div class="d-md-flex pt-4">
                        <ul class="list-inline d-flex ms-auto">
                            <li class="ps-3">
                                <h5><span class="text-primary">X-axis</span> - Last 7 day date of inspection</h5>
                            </li>
                            <li class="ps-3">
                                <h5><span class="text-info">Y-axis</span> - Inspection Count</h5>
                            </li>
                        </ul>
                    </div>
                    <div id="ct-visits" style="height: 405px;">
                        <!-- <div class="chartist-tooltip" style="top: -17px; left: -12px;"><span
                                class="chartist-tooltip-value">6</span>
                        </div> -->
                    </div>
                </div>
            </div>
        </div>

        <div id="mySidenav" class="sidenav border-right">
            <div class="p-3">
                <h5>Filter Inspection</h5><a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                <hr>
                    <div class="form-group">
                    <label for="date">Date</label>
                    <input type="date" class="form-control" name="date" id="date" placeholder="Name">
                    </div>
                    <div class="form-group">
                    <label for="template">Template</label>
                    <div class="accordion" id="accordionExample">
                        <div class="card">
                          <div class="card-header card-header1" id="headingOne">
                            <h2 class="mb-0">
                              <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                Apply template filter
                              </button>
                            </h2>
                          </div>
                      
                          <div id="collapseOne" class="collapse side-collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                            <div class="card-body">
                                <div class="form-group form-check">
                                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                    <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                </div>
                                <div class="form-group form-check">
                                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                    <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                </div>
                                <div class="form-group form-check">
                                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                    <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                </div>
                                <div class="form-group form-check">
                                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                    <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                </div>
                                <div class="form-group form-check">
                                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                    <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                </div>
                                <div class="form-group form-check">
                                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                    <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                </div>
                                <div class="form-group form-check">
                                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                    <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                </div>
                            </div>
                          </div>
                        </div>
                    </div>
                    </div>
                    <div class="form-group">
                        <label for="template">Inspection</label>
                        <div class="accordion" id="accordionExample">
                            <div class="card">
                              <div class="card-header card-header1" id="headingOne">
                                <h2 class="mb-0">
                                  <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                                    Apply inspection filter
                                  </button>
                                </h2>
                              </div>
                          
                              <div id="collapseTwo" class="collapse side-collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                                <div class="card-body">
                                    <div class="form-group form-check">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                        <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                    </div>
                                    <div class="form-group form-check">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                        <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                    </div>
                                    <div class="form-group form-check">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                        <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                    </div>
                                    <div class="form-group form-check">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                        <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                    </div>
                                </div>
                              </div>
                            </div>
                        </div>
                        </div>
                        <div class="form-group">
                            <label for="template">Region</label>
                            <div class="accordion" id="accordionExample">
                                <div class="card">
                                  <div class="card-header card-header1" id="headingOne">
                                    <h2 class="mb-0">
                                      <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
                                        Apply region filter
                                      </button>
                                    </h2>
                                  </div>
                              
                                  <div id="collapseThree" class="collapse side-collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="form-group form-check">
                                            <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                            <label class="form-check-label" for="exampleCheck1">Central Region</label>
                                        </div>
                                        <div class="form-group form-check">
                                            <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                            <label class="form-check-label" for="exampleCheck1">North Region</label>
                                        </div>
                                        <div class="form-group form-check">
                                            <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                            <label class="form-check-label" for="exampleCheck1">East Region</label>
                                        </div>
                                        <div class="form-group form-check">
                                            <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                            <label class="form-check-label" for="exampleCheck1">West Region</label>
                                        </div>
                                        <div class="form-group form-check">
                                            <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                            <label class="form-check-label" for="exampleCheck1">South Region</label>
                                        </div>
                                    </div>
                                  </div>
                                </div>
                            </div>
                            </div>

                            <div class="form-group">
                                <label for="template">Area</label>
                                <div class="accordion" id="accordionExample">
                                    <div class="card">
                                      <div class="card-header card-header1" id="headingOne">
                                        <h2 class="mb-0">
                                          <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapsefour" aria-expanded="true" aria-controls="collapsefour">
                                            Apply area filter
                                          </button>
                                        </h2>
                                      </div>
                                  
                                      <div id="collapsefour" class="collapse side-collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                                        <div class="card-body">
                                            <div class="form-group form-check">
                                                <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                                <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                            </div>
                                            <div class="form-group form-check">
                                                <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                                <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                            </div>
                                            <div class="form-group form-check">
                                                <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                                <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                            </div>
                                            <div class="form-group form-check">
                                                <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                                <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                            </div>
                                            <div class="form-group form-check">
                                                <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                                <label class="form-check-label" for="exampleCheck1">Check me out</label>
                                            </div>
                                        </div>
                                      </div>
                                    </div>
                                </div>
                                </div>
                  
                    <button type="submit" name="submit" class="btn btn-common btn-sm btn-outline-info">Submit</button>
            </div>
        </div>
    <!-- ============================================================== -->
    <!-- End Container fluid  -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- footer -->
    <!-- ============================================================== -->
    <footer class="footer text-center"> 2022 Â© Kido | All rights reserved <a
            href="https://kido.school/en/">Kido School</a>
    </footer>
    <!-- ============================================================== -->
    <!-- End footer -->
    <!-- ============================================================== -->
</div>

<script>
    var form = new FormData();
    form.append("api", "country_admin_analytics");
    var country_data = local_get('logged_user');
    var country_id  = country_data.country;
    form.append("country_id", country_id);
    var settings = {
    "url": server,
    "method": "POST",
    "timeout": 0,
    "processData": false,
    "mimeType": "multipart/form-data",
    "contentType": false,
    "data": form
    };

    $.ajax(settings).done(function (response) {
        var resp = JSON.parse(response);
        var reg_obj = {};
        var nurs_obj = {};
        var usr_obj = {};
        console.log(resp);
        $.each( resp, function (k1, v1) {

            !reg_obj[v1.region] ?  reg_obj[v1.region] = {} : true;
            !nurs_obj[v1.region] ?  nurs_obj[v1.region] = {} : true;
            !usr_obj[v1.region] ?  usr_obj[v1.region] = 0 : true;

            !reg_obj[v1.region][v1.Cluster] ?  reg_obj[v1.region][v1.Cluster] = {} : true;

            if(v1.Nursery){
                var nurs = v1.region+v1.Cluster+v1.Nursery;
                !nurs_obj[v1.region][nurs] ? nurs_obj[v1.region][nurs] = 0 : true;
                nurs_obj[v1.region][nurs]++;
            }

            if(v1.user_id){
                usr_obj[v1.region]++;
            }

        });
        
        var obj_fin = {};
        $.each( reg_obj, function (k1, v1) {

            !obj_fin[k1] ? obj_fin[k1] = {} : true;
            obj_fin[k1]["Cluster"] = Object.keys(reg_obj[k1]).length;
            obj_fin[k1]["Nurseries"] = Object.keys(nurs_obj[k1]).length;
            obj_fin[k1]["Users"] = usr_obj[k1];

        });

        console.log(obj_fin);
        $("#north-total-cluster").text(obj_fin.North.Cluster);
        $("#north-total-nurseries").text(obj_fin.North.Nurseries);
        $("#north-total-teachers").text(obj_fin.North.Users);

        $("#east-total-cluster").text(obj_fin.East.Cluster);
        $("#east-total-nurseries").text(obj_fin.East.Nurseries);
        $("#east-total-teachers").text(obj_fin.East.Users);

        $("#west-total-cluster").text(obj_fin.West.Cluster);
        $("#west-total-nurseries").text(obj_fin.West.Nurseries);
        $("#west-total-teachers").text(obj_fin.West.Users);

        $("#south-total-cluster").text(obj_fin.South.Cluster);
        $("#south-total-nurseries").text(obj_fin.South.Nurseries);
        $("#south-total-teachers").text(obj_fin.South.Users);

        $("#central-total-cluster").text(obj_fin.Central.Cluster);
        $("#central-total-nurseries").text(obj_fin.Central.Nurseries);
        $("#central-total-teachers").text(obj_fin.Central.Users);
    

            $('.region-btn').click(function() {
                var n = $(this).attr('region');      
                $("."+n).empty();
                $.each(Object.keys(reg_obj[n]), function(key,valueObj){
                    var clus_card = `<div class="clus-nur-details d-flex justify-content-between pt-2">
                                        <div class="clu-head">
                                            <h4 class="text-primary mb-1 north-cluster">`+valueObj+`</h4>
                                        </div>
                                        <div class="nur-count">
                                            <span>0 Nurseries</span><br>
                                            <span>0 Teachers</span>
                                        </div>
                                    </div>`;
                    $("."+n).append(clus_card);
                }); 

            });

    });

      /* Set the width of the side navigation to 300px and the left margin of the page content to 250px */
        function openNav() {
            document.getElementById("mySidenav").style.width = "280px";
        }
        /* Set the width of the side navigation to 0 and the left margin of the page content to 0 */
        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";
        }      
</script>

<script src="plugins/bower_components/chartist/dist/chartist.min.js"></script>
<script src="plugins/bower_components/chartist-plugin-tooltips/dist/chartist-plugin-tooltip.min.js"></script>
<script src="js/pages/dashboards/dashboard1.js"></script>



